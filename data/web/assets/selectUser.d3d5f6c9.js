import{a0 as P,g as m,a9 as I,r as s,o as Q,c as A,w as l,m as y,j as e,k as r,a7 as V,t as E,V as F,W as O,z as c,P as W}from"./vendor.8d886737.js";import{u as G,c as H}from"./role.8100c124.js";import"./index.c83df884.js";const J=c("\u641C\u7D22"),M=c("\u91CD\u7F6E"),X={class:"dialog-footer"},Y=c("\u786E \u5B9A"),Z=c("\u53D6 \u6D88"),ee=P({name:"SelectUser"}),ne=Object.assign(ee,{props:{role_id:{type:[Number,String]}},emits:["ok"],setup(k,{expose:C,emit:S}){const U=k,{proxy:u}=W(),{sys_normal_disable:z}=u.useDict("sys_normal_disable"),w=m([]),p=m(!1),f=m(0),b=m([]),n=I({page_num:1,page_size:10,role_id:void 0,user_name:void 0,phone_num:void 0});function x(){n.role_id=U.role_id,g(),p.value=!0}function R(a){u.$refs.refTable.toggleRowSelection(a)}function j(a){b.value=a.map(o=>o.id)}async function g(){const a=await G(n);w.value=a.list,f.value=a.total}function d(){n.page_num=1,g()}function K(){u.resetForm("queryRef"),d()}function N(){const a=n.role_id,o=b.value;if(o.length===0){u.$modal.msgError("\u8BF7\u9009\u62E9\u8981\u5206\u914D\u7684\u7528\u6237");return}H({role_id:a,user_ids:o}).then(v=>{u.$modal.msgSuccess("\u6388\u6743\u6210\u529F"),p.value=!1,S("ok")})}return C({show:x}),(a,o)=>{const v=s("el-input"),h=s("el-form-item"),_=s("el-button"),T=s("el-form"),i=s("el-table-column"),$=s("dict-tag"),q=s("el-table"),B=s("pagination"),D=s("el-row"),L=s("el-dialog");return Q(),A(L,{title:"\u9009\u62E9\u7528\u6237",modelValue:p.value,"onUpdate:modelValue":o[5]||(o[5]=t=>p.value=t),width:"800px",top:"5vh","append-to-body":""},{footer:l(()=>[y("div",X,[e(_,{type:"primary",onClick:N},{default:l(()=>[Y]),_:1}),e(_,{onClick:o[4]||(o[4]=t=>p.value=!1)},{default:l(()=>[Z]),_:1})])]),default:l(()=>[e(T,{model:r(n),ref:"queryRef",inline:!0},{default:l(()=>[e(h,{label:"\u7528\u6237\u540D\u79F0",prop:"user_name"},{default:l(()=>[e(v,{modelValue:r(n).user_name,"onUpdate:modelValue":o[0]||(o[0]=t=>r(n).user_name=t),placeholder:"\u8BF7\u8F93\u5165\u7528\u6237\u540D\u79F0",clearable:"",size:"small",onKeyup:V(d,["enter"])},null,8,["modelValue","onKeyup"])]),_:1}),e(h,{label:"\u624B\u673A\u53F7\u7801",prop:"phone_num"},{default:l(()=>[e(v,{modelValue:r(n).phone_num,"onUpdate:modelValue":o[1]||(o[1]=t=>r(n).phone_num=t),placeholder:"\u8BF7\u8F93\u5165\u624B\u673A\u53F7\u7801",clearable:"",size:"small",onKeyup:V(d,["enter"])},null,8,["modelValue","onKeyup"])]),_:1}),e(h,null,{default:l(()=>[e(_,{type:"primary",icon:"Search",size:"mini",onClick:d},{default:l(()=>[J]),_:1}),e(_,{icon:"Refresh",size:"mini",onClick:K},{default:l(()=>[M]),_:1})]),_:1})]),_:1},8,["model"]),e(D,null,{default:l(()=>[e(q,{onRowClick:R,ref:"refTable",data:w.value,onSelectionChange:j,height:"260px"},{default:l(()=>[e(i,{type:"selection",width:"55"}),e(i,{label:"\u7528\u6237\u540D\u79F0",prop:"user_name","show-overflow-tooltip":!0}),e(i,{label:"\u7528\u6237\u6635\u79F0",prop:"user_nickname","show-overflow-tooltip":!0}),e(i,{label:"\u90AE\u7BB1",prop:"user_email","show-overflow-tooltip":!0}),e(i,{label:"\u624B\u673A",prop:"phone_num","show-overflow-tooltip":!0}),e(i,{label:"\u72B6\u6001",align:"center",prop:"user_status"},{default:l(t=>[e($,{options:r(z),value:t.row.user_status},null,8,["options","value"])]),_:1}),e(i,{label:"\u521B\u5EFA\u65F6\u95F4",align:"center",prop:"created_at",width:"180"},{default:l(t=>[y("span",null,E(a.parseTime(t.row.created_at)),1)]),_:1})]),_:1},8,["data"]),F(e(B,{total:f.value,page:r(n).page_num,"onUpdate:page":o[2]||(o[2]=t=>r(n).page_num=t),limit:r(n).page_size,"onUpdate:limit":o[3]||(o[3]=t=>r(n).page_size=t),onPagination:g},null,8,["total","page","limit"]),[[O,f.value>0]])]),_:1})]),_:1},8,["modelValue"])}}});export{ne as default};
