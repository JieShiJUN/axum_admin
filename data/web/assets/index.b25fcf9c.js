import{a1 as Q,g as u,r,ab as C,o as h,i as R,j as e,w as o,a8 as k,W as b,c as N,p as K,t as L,X as F,A as y,Q as O}from"./vendor.dda3acc4.js";import{s as j}from"./index.6a9993b0.js";function T(d){return j({url:"/system/online/list",method:"get",params:d})}function z(d){return j({url:"/system/online/delete",method:"delete",data:d})}const A={class:"app-container"},E=y("\u641C\u7D22"),I=y("\u91CD\u7F6E"),W=y("\u5F3A\u9000"),X=Q({name:"Online"}),M=Object.assign(X,{setup(d){const{proxy:m}=O(),x=u([]),_=u(!0),f=u(0),i=u(1),p=u(10),s=u({ipaddr:void 0,user_name:void 0});function v(){_.value=!0,T(s.value).then(a=>{x.value=a.list,f.value=a.total,_.value=!1})}function c(){i.value=1,v()}function B(){m.resetForm("queryRef"),c()}function D(a){let n=[a.id];m.$modal.confirm('\u662F\u5426\u786E\u8BA4\u5F3A\u9000\u540D\u79F0\u4E3A"'+a.user_name+'"\u7684\u7528\u6237?').then(function(){return z({ids:n})}).then(()=>{v(),m.$modal.msgSuccess("\u5F3A\u9000\u6210\u529F")}).catch(()=>{})}return v(),(a,n)=>{const V=r("el-input"),g=r("el-form-item"),w=r("el-button"),S=r("el-form"),l=r("el-table-column"),U=r("el-table"),$=r("pagination"),q=C("hasPermi"),P=C("loading");return h(),R("div",A,[e(S,{model:s.value,ref:"queryRef",inline:!0,"label-width":"68px"},{default:o(()=>[e(g,{label:"\u767B\u5F55\u5730\u5740",prop:"ipaddr"},{default:o(()=>[e(V,{modelValue:s.value.ipaddr,"onUpdate:modelValue":n[0]||(n[0]=t=>s.value.ipaddr=t),placeholder:"\u8BF7\u8F93\u5165\u767B\u5F55\u5730\u5740",clearable:"",onKeyup:k(c,["enter"])},null,8,["modelValue","onKeyup"])]),_:1}),e(g,{label:"\u7528\u6237\u540D\u79F0",prop:"userName"},{default:o(()=>[e(V,{modelValue:s.value.userName,"onUpdate:modelValue":n[1]||(n[1]=t=>s.value.userName=t),placeholder:"\u8BF7\u8F93\u5165\u7528\u6237\u540D\u79F0",clearable:"",onKeyup:k(c,["enter"])},null,8,["modelValue","onKeyup"])]),_:1}),e(g,null,{default:o(()=>[e(w,{type:"primary",icon:"Search",onClick:c},{default:o(()=>[E]),_:1}),e(w,{icon:"Refresh",onClick:B},{default:o(()=>[I]),_:1})]),_:1})]),_:1},8,["model"]),b((h(),N(U,{data:x.value.slice((i.value-1)*p.value,i.value*p.value),style:{width:"100%"}},{default:o(()=>[e(l,{label:"\u5E8F\u53F7",width:"50",type:"index",align:"center"},{default:o(t=>[K("span",null,L((i.value-1)*p.value+t.$index+1),1)]),_:1}),e(l,{label:"\u4F1A\u8BDD\u7F16\u53F7",align:"center",prop:"id","show-overflow-tooltip":!0}),e(l,{label:"\u767B\u5F55\u540D\u79F0",align:"center",prop:"user_name","show-overflow-tooltip":!0}),e(l,{label:"\u6240\u5C5E\u90E8\u95E8",align:"center",prop:"dept_name","show-overflow-tooltip":!0}),e(l,{label:"\u7F51\u7EDC",align:"center",prop:"net","show-overflow-tooltip":!0}),e(l,{label:"\u4E3B\u673A",align:"center",prop:"ipaddr","show-overflow-tooltip":!0}),e(l,{label:"\u767B\u5F55\u5730\u70B9",align:"center",prop:"login_location","show-overflow-tooltip":!0}),e(l,{label:"\u64CD\u4F5C\u7CFB\u7EDF",align:"center",prop:"os","show-overflow-tooltip":!0}),e(l,{label:"\u6D4F\u89C8\u5668",align:"center",prop:"browser","show-overflow-tooltip":!0}),e(l,{label:"\u8BBE\u5907",align:"center",prop:"device","show-overflow-tooltip":!0}),e(l,{label:"\u767B\u5F55\u65F6\u95F4",align:"center",prop:"login_time",width:"180"},{default:o(t=>[K("span",null,L(a.parseTime(t.row.login_time)),1)]),_:1}),e(l,{label:"\u64CD\u4F5C",align:"center","class-name":"small-padding fixed-width"},{default:o(t=>[b((h(),N(w,{type:"text",icon:"Delete",onClick:G=>D(t.row)},{default:o(()=>[W]),_:2},1032,["onClick"])),[[q,["monitor:online:forceLogout"]]])]),_:1})]),_:1},8,["data"])),[[P,_.value]]),b(e($,{total:f.value,page:i.value,"onUpdate:page":n[2]||(n[2]=t=>i.value=t),limit:p.value,"onUpdate:limit":n[3]||(n[3]=t=>p.value=t)},null,8,["total","page","limit"]),[[F,f.value>0]])])}}});export{M as default};
