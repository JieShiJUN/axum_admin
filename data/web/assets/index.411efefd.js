import{a0 as q,g as u,r as i,aa as C,o as h,i as R,j as e,w as o,a7 as k,V as b,c as z,m as N,t as K,W as F,z as y,P as O}from"./vendor.8d886737.js";import{s as L}from"./index.c83df884.js";function Q(d){return L({url:"/system/online/list",method:"get",params:d})}function T(d){return L({url:"/system/online/delete",method:"delete",data:d})}const E={class:"app-container"},I=y("\u641C\u7D22"),W=y("\u91CD\u7F6E"),A=y("\u5F3A\u9000"),G=q({name:"Online"}),X=Object.assign(G,{setup(d){const{proxy:m}=O(),x=u([]),_=u(!0),f=u(0),r=u(1),p=u(10),s=u({ipaddr:void 0,user_name:void 0});function v(){_.value=!0,Q(s.value).then(a=>{x.value=a.list,f.value=a.total,_.value=!1})}function c(){r.value=1,v()}function j(){m.resetForm("queryRef"),c()}function B(a){let n=[a.id];m.$modal.confirm('\u662F\u5426\u786E\u8BA4\u5F3A\u9000\u540D\u79F0\u4E3A"'+a.user_name+'"\u7684\u7528\u6237?').then(function(){return T({ids:n})}).then(()=>{v(),m.$modal.msgSuccess("\u5F3A\u9000\u6210\u529F")}).catch(()=>{})}return v(),(a,n)=>{const V=i("el-input"),g=i("el-form-item"),w=i("el-button"),D=i("el-form"),t=i("el-table-column"),P=i("el-table"),S=i("pagination"),U=C("hasPermi"),$=C("loading");return h(),R("div",E,[e(D,{model:s.value,ref:"queryRef",inline:!0,"label-width":"68px"},{default:o(()=>[e(g,{label:"\u767B\u5F55\u5730\u5740",prop:"ipaddr"},{default:o(()=>[e(V,{modelValue:s.value.ipaddr,"onUpdate:modelValue":n[0]||(n[0]=l=>s.value.ipaddr=l),placeholder:"\u8BF7\u8F93\u5165\u767B\u5F55\u5730\u5740",clearable:"",size:"small",onKeyup:k(c,["enter"])},null,8,["modelValue","onKeyup"])]),_:1}),e(g,{label:"\u7528\u6237\u540D\u79F0",prop:"userName"},{default:o(()=>[e(V,{modelValue:s.value.userName,"onUpdate:modelValue":n[1]||(n[1]=l=>s.value.userName=l),placeholder:"\u8BF7\u8F93\u5165\u7528\u6237\u540D\u79F0",clearable:"",onKeyup:k(c,["enter"])},null,8,["modelValue","onKeyup"])]),_:1}),e(g,null,{default:o(()=>[e(w,{type:"primary",icon:"Search",size:"mini",onClick:c},{default:o(()=>[I]),_:1}),e(w,{icon:"Refresh",size:"mini",onClick:j},{default:o(()=>[W]),_:1})]),_:1})]),_:1},8,["model"]),b((h(),z(P,{data:x.value.slice((r.value-1)*p.value,r.value*p.value),style:{width:"100%"}},{default:o(()=>[e(t,{label:"\u5E8F\u53F7",type:"index",align:"center"},{default:o(l=>[N("span",null,K((r.value-1)*p.value+l.$index+1),1)]),_:1}),e(t,{label:"\u4F1A\u8BDD\u7F16\u53F7",align:"center",prop:"id","show-overflow-tooltip":!0}),e(t,{label:"\u767B\u5F55\u540D\u79F0",align:"center",prop:"user_name","show-overflow-tooltip":!0}),e(t,{label:"\u6240\u5C5E\u90E8\u95E8",align:"center",prop:"dept_name","show-overflow-tooltip":!0}),e(t,{label:"\u7F51\u7EDC",align:"center",prop:"net","show-overflow-tooltip":!0}),e(t,{label:"\u4E3B\u673A",align:"center",prop:"ipaddr","show-overflow-tooltip":!0}),e(t,{label:"\u767B\u5F55\u5730\u70B9",align:"center",prop:"login_location","show-overflow-tooltip":!0}),e(t,{label:"\u64CD\u4F5C\u7CFB\u7EDF",align:"center",prop:"os","show-overflow-tooltip":!0}),e(t,{label:"\u6D4F\u89C8\u5668",align:"center",prop:"browser","show-overflow-tooltip":!0}),e(t,{label:"\u8BBE\u5907",align:"center",prop:"device","show-overflow-tooltip":!0}),e(t,{label:"\u767B\u5F55\u65F6\u95F4",align:"center",prop:"login_time",width:"180"},{default:o(l=>[N("span",null,K(a.parseTime(l.row.login_time)),1)]),_:1}),e(t,{label:"\u64CD\u4F5C",align:"center","class-name":"small-padding fixed-width"},{default:o(l=>[b((h(),z(w,{size:"mini",type:"text",icon:"Delete",onClick:H=>B(l.row)},{default:o(()=>[A]),_:2},1032,["onClick"])),[[U,["monitor:online:forceLogout"]]])]),_:1})]),_:1},8,["data"])),[[$,_.value]]),b(e(S,{total:f.value,page:r.value,"onUpdate:page":n[2]||(n[2]=l=>r.value=l),limit:p.value,"onUpdate:limit":n[3]||(n[3]=l=>p.value=l)},null,8,["total","page","limit"]),[[F,f.value>0]])])}}});export{X as default};
