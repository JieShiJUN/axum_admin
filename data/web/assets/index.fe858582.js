import{a1 as se,D as ue,g as c,aa as de,a4 as re,ac as pe,r as s,ab as E,o as b,i as K,W as d,X as B,j as e,w as a,k as o,a8 as F,c as v,p as Q,t as Y,z as ce,C as me,A as h,Q as _e}from"./vendor.dda3acc4.js";import{a as fe,b as be,s as ge,p as ve,d as he}from"./gen.7b2d9072.js";import{J as we}from"./index.6a9993b0.js";import ye from"./importTable.016ad5eb.js";const Ce={class:"app-container"},Ne=h("\u641C\u7D22"),xe=h("\u91CD\u7F6E"),Ve=h("\u751F\u6210"),ke=h("\u5BFC\u5165"),Se=h("\u4FEE\u6539"),$e=h("\u5220\u9664"),De=se({name:"Gen"}),je=Object.assign(De,{setup(Te){const T=ue(),{proxy:r}=_e(),I=c([]),V=c(!0),k=c(!0),S=c([]),R=c(!0),q=c(!0),$=c(0),U=c([]),w=c([]),j=c(""),G=de({queryParams:{pageNum:1,pageSize:10,tableName:void 0,tableComment:void 0},preview:{open:!1,title:"\u4EE3\u7801\u9884\u89C8",data:{},activeName:"domain.java"}}),{queryParams:i,preview:m}=re(G);pe(()=>{const l=T.query.t;l!=null&&l!=j.value&&(j.value=l,i.value.pageNum=Number(T.query.pageNum),w.value=[],r.resetForm("queryForm"),g())});function g(){V.value=!0,fe(r.addDateRange(i.value,w.value)).then(l=>{I.value=l.rows,$.value=l.total,V.value=!1})}function y(){i.value.pageNum=1,g()}function P(l){const t=l.tableName||U.value;if(t==""){r.$modal.msgError("\u8BF7\u9009\u62E9\u8981\u751F\u6210\u7684\u6570\u636E");return}l.genType==="1"?be(l.tableName).then(D=>{r.$modal.msgSuccess("\u6210\u529F\u751F\u6210\u5230\u81EA\u5B9A\u4E49\u8DEF\u5F84\uFF1A"+l.genPath)}):r.$download.zip("/tool/gen/batchGenCode?tables="+t,"ruoyi")}function L(l){const t=l.tableName;r.$modal.confirm('\u786E\u8BA4\u8981\u5F3A\u5236\u540C\u6B65"'+t+'"\u8868\u7ED3\u6784\u5417\uFF1F').then(function(){return ge(t)}).then(()=>{r.$modal.msgSuccess("\u540C\u6B65\u6210\u529F")}).catch(()=>{})}function A(){r.$refs.importRef.show()}function M(){w.value=[],r.resetForm("queryRef"),y()}function J(l){ve(l.tableId).then(t=>{m.value.data=t.data,m.value.open=!0,m.value.activeName="domain.java"})}function W(l){S.value=l.map(t=>t.tableId),U.value=l.map(t=>t.tableName),R.value=l.length!=1,q.value=!l.length}function z(l){const t=l.tableId||S.value[0];we.push({path:"/tool/gen-edit/index/"+t,query:{pageNum:i.value.pageNum}})}function O(l){const t=l.tableId||S.value;r.$modal.confirm('\u662F\u5426\u786E\u8BA4\u5220\u9664\u8868\u7F16\u53F7\u4E3A"'+t+'"\u7684\u6570\u636E\u9879\uFF1F').then(function(){return he(t)}).then(()=>{g(),r.$modal.msgSuccess("\u5220\u9664\u6210\u529F")}).catch(()=>{})}return g(),(l,t)=>{const D=s("el-input"),N=s("el-form-item"),X=s("el-date-picker"),p=s("el-button"),H=s("el-form"),x=s("el-col"),Z=s("right-toolbar"),ee=s("el-row"),f=s("el-table-column"),C=s("el-tooltip"),te=s("el-table"),ae=s("pagination"),le=s("el-tab-pane"),ne=s("el-tabs"),oe=s("el-dialog"),_=E("hasPermi"),ie=E("loading");return b(),K("div",Ce,[d(e(H,{model:o(i),ref:"queryRef",inline:!0,"label-width":"68px"},{default:a(()=>[e(N,{label:"\u8868\u540D\u79F0",prop:"tableName"},{default:a(()=>[e(D,{modelValue:o(i).tableName,"onUpdate:modelValue":t[0]||(t[0]=n=>o(i).tableName=n),placeholder:"\u8BF7\u8F93\u5165\u8868\u540D\u79F0",clearable:"",onKeyup:F(y,["enter"])},null,8,["modelValue","onKeyup"])]),_:1}),e(N,{label:"\u8868\u63CF\u8FF0",prop:"tableComment"},{default:a(()=>[e(D,{modelValue:o(i).tableComment,"onUpdate:modelValue":t[1]||(t[1]=n=>o(i).tableComment=n),placeholder:"\u8BF7\u8F93\u5165\u8868\u63CF\u8FF0",clearable:"",onKeyup:F(y,["enter"])},null,8,["modelValue","onKeyup"])]),_:1}),e(N,{label:"\u521B\u5EFA\u65F6\u95F4",style:{width:"308px"}},{default:a(()=>[e(X,{modelValue:w.value,"onUpdate:modelValue":t[2]||(t[2]=n=>w.value=n),"value-format":"YYYY-MM-DD",type:"daterange","range-separator":"-","start-placeholder":"\u5F00\u59CB\u65E5\u671F","end-placeholder":"\u7ED3\u675F\u65E5\u671F"},null,8,["modelValue"])]),_:1}),e(N,null,{default:a(()=>[e(p,{type:"primary",icon:"Search",onClick:y},{default:a(()=>[Ne]),_:1}),e(p,{icon:"Refresh",onClick:M},{default:a(()=>[xe]),_:1})]),_:1})]),_:1},8,["model"]),[[B,k.value]]),e(ee,{gutter:10,class:"mb8",style:{height:"35px"}},{default:a(()=>[e(x,{span:1.5},{default:a(()=>[d((b(),v(p,{type:"primary",plain:"",icon:"Download",onClick:P},{default:a(()=>[Ve]),_:1})),[[_,["tool:gen:code"]]])]),_:1},8,["span"]),e(x,{span:1.5},{default:a(()=>[d((b(),v(p,{type:"info",plain:"",icon:"Upload",onClick:A},{default:a(()=>[ke]),_:1})),[[_,["tool:gen:import"]]])]),_:1},8,["span"]),e(x,{span:1.5},{default:a(()=>[d((b(),v(p,{type:"success",plain:"",icon:"Edit",disabled:R.value,onClick:z},{default:a(()=>[Se]),_:1},8,["disabled"])),[[_,["tool:gen:edit"]]])]),_:1},8,["span"]),e(x,{span:1.5},{default:a(()=>[d((b(),v(p,{type:"danger",plain:"",icon:"Delete",disabled:q.value,onClick:O},{default:a(()=>[$e]),_:1},8,["disabled"])),[[_,["tool:gen:remove"]]])]),_:1},8,["span"]),e(Z,{showSearch:k.value,"onUpdate:showSearch":t[3]||(t[3]=n=>k.value=n),onQueryTable:g},null,8,["showSearch"])]),_:1}),d((b(),v(te,{data:I.value,onSelectionChange:W},{default:a(()=>[e(f,{type:"selection",align:"center",width:"55"}),e(f,{label:"\u5E8F\u53F7",type:"index",width:"50",align:"center"},{default:a(n=>[Q("span",null,Y((o(i).pageNum-1)*o(i).pageSize+n.$index+1),1)]),_:1}),e(f,{label:"\u8868\u540D\u79F0",align:"center",prop:"tableName","show-overflow-tooltip":!0}),e(f,{label:"\u8868\u63CF\u8FF0",align:"center",prop:"tableComment","show-overflow-tooltip":!0}),e(f,{label:"\u5B9E\u4F53",align:"center",prop:"className","show-overflow-tooltip":!0}),e(f,{label:"\u521B\u5EFA\u65F6\u95F4",align:"center",prop:"createTime",width:"160"}),e(f,{label:"\u66F4\u65B0\u65F6\u95F4",align:"center",prop:"updateTime",width:"160"}),e(f,{label:"\u64CD\u4F5C",align:"center",width:"330","class-name":"small-padding fixed-width"},{default:a(n=>[e(C,{content:"\u9884\u89C8",placement:"top"},{default:a(()=>[d(e(p,{type:"text",icon:"View",onClick:u=>J(n.row)},null,8,["onClick"]),[[_,["tool:gen:preview"]]])]),_:2},1024),e(C,{content:"\u7F16\u8F91",placement:"top"},{default:a(()=>[d(e(p,{type:"text",icon:"Edit",onClick:u=>z(n.row)},null,8,["onClick"]),[[_,["tool:gen:edit"]]])]),_:2},1024),e(C,{content:"\u5220\u9664",placement:"top"},{default:a(()=>[d(e(p,{type:"text",icon:"Delete",onClick:u=>O(n.row)},null,8,["onClick"]),[[_,["tool:gen:remove"]]])]),_:2},1024),e(C,{content:"\u540C\u6B65",placement:"top"},{default:a(()=>[d(e(p,{type:"text",icon:"Refresh",onClick:u=>L(n.row)},null,8,["onClick"]),[[_,["tool:gen:edit"]]])]),_:2},1024),e(C,{content:"\u751F\u6210\u4EE3\u7801",placement:"top"},{default:a(()=>[d(e(p,{type:"text",icon:"Download",onClick:u=>P(n.row)},null,8,["onClick"]),[[_,["tool:gen:code"]]])]),_:2},1024)]),_:1})]),_:1},8,["data"])),[[ie,V.value]]),d(e(ae,{total:$.value,page:o(i).pageNum,"onUpdate:page":t[4]||(t[4]=n=>o(i).pageNum=n),limit:o(i).pageSize,"onUpdate:limit":t[5]||(t[5]=n=>o(i).pageSize=n),onPagination:g},null,8,["total","page","limit"]),[[B,$.value>0]]),e(oe,{title:o(m).title,modelValue:o(m).open,"onUpdate:modelValue":t[7]||(t[7]=n=>o(m).open=n),width:"80%",top:"5vh","append-to-body":"","custom-class":"scrollbar"},{default:a(()=>[e(ne,{modelValue:o(m).activeName,"onUpdate:modelValue":t[6]||(t[6]=n=>o(m).activeName=n)},{default:a(()=>[(b(!0),K(ce,null,me(o(m).data,(n,u)=>(b(),v(le,{label:u.substring(u.lastIndexOf("/")+1,u.indexOf(".vm")),name:u.substring(u.lastIndexOf("/")+1,u.indexOf(".vm")),key:u},{default:a(()=>[Q("pre",null,Y(n),1)]),_:2},1032,["label","name"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["title","modelValue"]),e(o(ye),{ref:"importRef",onOk:y},null,512)])}}});export{je as default};
