import{m as e,j as u,E as l,x as r,y as t}from"./index.js";import{E as a}from"./useTabBar-7d8415a5.js";import{u as n}from"./useFormUtil-98c17c20.js";const o=Vue.defineComponent({name:"user-information"}),m=Vue.defineComponent({...o,props:{user:{type:Object,required:!0}},setup(o){const m=o,{formValidate:V}=n(),s=Vue.ref(),{t:i}=VueI18n.useI18n({useScope:"global"}),d=Vue.ref({user_nickname:[{required:!0,message:"用户昵称不能为空",trigger:"blur"}],user_email:[{required:!0,message:"邮箱地址不能为空",trigger:"blur"},{type:"email",message:"请输入正确的邮箱地址",trigger:["blur","change"]}],phone_num:[{required:!0,message:"手机号码不能为空",trigger:"blur"},{pattern:/^1[3|4|5|6|7|8|9][0-9]\d{8}$/,message:"请输入正确的手机号码",trigger:"blur"}]}),c=async()=>{if(!(await V(s.value)))return;const r={id:m.user.id,user_nickname:m.user.user_nickname,user_email:m.user.user_email,phone_num:m.user.phone_num,sex:m.user.sex},{execute:t,data:a}=e(u.updateProfile,r);await t(),a.value!==l&&ElementPlus.ElMessage.success("用户信息更新成功")},f=()=>{r.back(),t(a.current)};return(e,u)=>(Vue.openBlock(),Vue.createBlock(Vue.unref(ElementPlus.ElForm),{ref_key:"userRef",ref:s,model:o.user,rules:d.value,"label-width":"80px"},{default:Vue.withCtx((()=>[Vue.createVNode(Vue.unref(ElementPlus.ElFormItem),{label:Vue.unref(i)("profile.nickName"),prop:"user_nickname"},{default:Vue.withCtx((()=>[Vue.createVNode(Vue.unref(ElementPlus.ElInput),{modelValue:o.user.user_nickname,"onUpdate:modelValue":u[0]||(u[0]=e=>o.user.user_nickname=e),maxlength:"30"},null,8,["modelValue"])])),_:1},8,["label"]),Vue.createVNode(Vue.unref(ElementPlus.ElFormItem),{label:Vue.unref(i)("common.phoneNum"),prop:"phone_num"},{default:Vue.withCtx((()=>[Vue.createVNode(Vue.unref(ElementPlus.ElInput),{modelValue:o.user.phone_num,"onUpdate:modelValue":u[1]||(u[1]=e=>o.user.phone_num=e),maxlength:"11"},null,8,["modelValue"])])),_:1},8,["label"]),Vue.createVNode(Vue.unref(ElementPlus.ElFormItem),{label:Vue.unref(i)("common.email"),prop:"user_email"},{default:Vue.withCtx((()=>[Vue.createVNode(Vue.unref(ElementPlus.ElInput),{modelValue:o.user.user_email,"onUpdate:modelValue":u[2]||(u[2]=e=>o.user.user_email=e),maxlength:"50"},null,8,["modelValue"])])),_:1},8,["label"]),Vue.createVNode(Vue.unref(ElementPlus.ElFormItem),{label:Vue.unref(i)("common.sex")},{default:Vue.withCtx((()=>[Vue.createVNode(Vue.unref(ElementPlus.ElRadioGroup),{modelValue:o.user.sex,"onUpdate:modelValue":u[3]||(u[3]=e=>o.user.sex=e)},{default:Vue.withCtx((()=>[Vue.createVNode(Vue.unref(ElementPlus.ElRadio),{label:"0"},{default:Vue.withCtx((()=>[Vue.createTextVNode(Vue.toDisplayString(Vue.unref(i)("common.sexV.male")),1)])),_:1}),Vue.createVNode(Vue.unref(ElementPlus.ElRadio),{label:"1"},{default:Vue.withCtx((()=>[Vue.createTextVNode(Vue.toDisplayString(Vue.unref(i)("common.sexV.female")),1)])),_:1}),Vue.createVNode(Vue.unref(ElementPlus.ElRadio),{label:"2"},{default:Vue.withCtx((()=>[Vue.createTextVNode(Vue.toDisplayString(Vue.unref(i)("common.sexV.unknown")),1)])),_:1})])),_:1},8,["modelValue"])])),_:1},8,["label"]),Vue.createVNode(Vue.unref(ElementPlus.ElFormItem),null,{default:Vue.withCtx((()=>[Vue.createVNode(Vue.unref(ElementPlus.ElButton),{type:"primary",onClick:c},{default:Vue.withCtx((()=>[Vue.createTextVNode(Vue.toDisplayString(Vue.unref(i)("common.save")),1)])),_:1}),Vue.createVNode(Vue.unref(ElementPlus.ElButton),{type:"danger",onClick:f},{default:Vue.withCtx((()=>[Vue.createTextVNode(Vue.toDisplayString(Vue.unref(i)("common.close")),1)])),_:1})])),_:1})])),_:1},8,["model","rules"]))}});export{m as _};
