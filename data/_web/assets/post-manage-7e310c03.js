import{s as e,r as u,p as t,e as l,d as o}from"./index-174ad176.js";import{i as a,o as n,p as r,k as V}from"./index.js";import{D as s}from"./dict-tag-15f2a908.js";import{u as i,P as c,a as d}from"./pagination-87b07e34.js";import{R as p}from"./right-tool-bar-f10e816b.js";import{u as m}from"./useFormUtil-98c17c20.js";import{h as f}from"./usePermission-16d8d5ac.js";import{u as E}from"./useTableUtil-0e4d2f9a.js";import{s as _}from"./constDynamicRoutes-5c9c22de.js";import{d as h}from"./dict-2940434e.js";import{_ as C}from"./post-manage-dialog.vue_vue_type_script_setup_true_lang-1ec5e7a6.js";import"./_plugin-vue_export-helper-0909ef10.js";const v=Vue.defineComponent({name:_.postManage.path}),w=Vue.defineComponent({...v,setup(_){const{t:v}=VueI18n.useI18n({useScope:"global"}),w=Vue.ref(!0),g=Vue.ref(),b=a(h.sysNormalDisable),N=Vue.ref(!1),k=Vue.ref(""),y=Vue.ref({}),{useTableSelectChange:x}=E(),{formReset:P}=m(),B=Vue.ref({page_size:10,page_num:1}),{list:T,getListFn:S,total:D}=i(n.getList,B),{handleSelectionChangeFn:j,ids:F,values:I,single:U,selected:K}=x(),R=e=>j(e,"post_id","post_name"),z=()=>{y.value={status:"1"},k.value="新增岗位",N.value=!0},L=async e=>{if(null==e?void 0:e.post_id)y.value=e;else{const{data:e,execute:u}=V(n.getById,{post_id:F.value[0]});await u(),y.value=e.value}k.value=`更新岗位-${y.value.post_name}`,N.value=!0},Q=async e=>{await d(n.delete,"post_id",F,"post_name",I,"post_ids",e)&&await S()},q=()=>{P(g.value),S()},M=()=>{N.value=!1,S()};return(a,V)=>(Vue.openBlock(),Vue.createElementBlock("div",null,[Vue.withDirectives(Vue.createVNode(Vue.unref(ElementPlus.ElForm),{ref_key:"queryRef",ref:g,inline:!0,model:B.value,class:"base-form","label-width":"68px"},{default:Vue.withCtx((()=>[Vue.createVNode(Vue.unref(ElementPlus.ElFormItem),{label:"岗位编码",prop:"post_code"},{default:Vue.withCtx((()=>[Vue.createVNode(Vue.unref(ElementPlus.ElInput),{modelValue:B.value.post_code,"onUpdate:modelValue":V[0]||(V[0]=e=>B.value.post_code=e),clearable:"",placeholder:"请输入岗位编码",onKeyup:Vue.withKeys(Vue.unref(S),["enter"])},null,8,["modelValue","onKeyup"])])),_:1}),Vue.createVNode(Vue.unref(ElementPlus.ElFormItem),{label:"岗位名称",prop:"post_name"},{default:Vue.withCtx((()=>[Vue.createVNode(Vue.unref(ElementPlus.ElInput),{modelValue:B.value.post_name,"onUpdate:modelValue":V[1]||(V[1]=e=>B.value.post_name=e),clearable:"",placeholder:"请输入岗位名称",onKeyup:Vue.withKeys(Vue.unref(S),["enter"])},null,8,["modelValue","onKeyup"])])),_:1}),Vue.createVNode(Vue.unref(ElementPlus.ElFormItem),{label:"岗位状态",prop:"status"},{default:Vue.withCtx((()=>[Vue.createVNode(Vue.unref(ElementPlus.ElSelect),{modelValue:B.value.status,"onUpdate:modelValue":V[2]||(V[2]=e=>B.value.status=e),clearable:"",placeholder:"岗位状态"},{default:Vue.withCtx((()=>[(Vue.openBlock(!0),Vue.createElementBlock(Vue.Fragment,null,Vue.renderList(Vue.unref(b)[Vue.unref(h).sysNormalDisable],(e=>(Vue.openBlock(),Vue.createBlock(Vue.unref(ElementPlus.ElOption),{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),Vue.createVNode(Vue.unref(ElementPlus.ElFormItem),null,{default:Vue.withCtx((()=>[Vue.createVNode(Vue.unref(ElementPlus.ElButton),{icon:Vue.unref(e),type:"primary",onClick:Vue.unref(S)},{default:Vue.withCtx((()=>[Vue.createTextVNode(Vue.toDisplayString(Vue.unref(v)("common.search")),1)])),_:1},8,["icon","onClick"]),Vue.createVNode(Vue.unref(ElementPlus.ElButton),{icon:Vue.unref(u),onClick:q},{default:Vue.withCtx((()=>[Vue.createTextVNode(Vue.toDisplayString(Vue.unref(v)("common.reset")),1)])),_:1},8,["icon"])])),_:1})])),_:1},8,["model"]),[[Vue.vShow,w.value]]),Vue.createVNode(Vue.unref(ElementPlus.ElRow),{gutter:10,class:"m-b-8px",style:{height:"35px"}},{default:Vue.withCtx((()=>[Vue.createVNode(Vue.unref(ElementPlus.ElCol),{span:1.5},{default:Vue.withCtx((()=>[Vue.unref(f)(Vue.unref(n).add)?(Vue.openBlock(),Vue.createBlock(Vue.unref(ElementPlus.ElButton),{key:0,icon:Vue.unref(t),plain:"",type:"primary",onClick:z},{default:Vue.withCtx((()=>[Vue.createTextVNode(Vue.toDisplayString(Vue.unref(v)("common.add")),1)])),_:1},8,["icon"])):Vue.createCommentVNode("",!0)])),_:1},8,["span"]),Vue.createVNode(Vue.unref(ElementPlus.ElCol),{span:1.5},{default:Vue.withCtx((()=>[Vue.unref(f)(Vue.unref(n).edit)?(Vue.openBlock(),Vue.createBlock(Vue.unref(ElementPlus.ElButton),{key:0,disabled:!Vue.unref(U),icon:Vue.unref(l),plain:"",type:"success",onClick:V[3]||(V[3]=e=>L())},{default:Vue.withCtx((()=>[Vue.createTextVNode(Vue.toDisplayString(Vue.unref(v)("common.edit")),1)])),_:1},8,["disabled","icon"])):Vue.createCommentVNode("",!0)])),_:1},8,["span"]),Vue.createVNode(Vue.unref(ElementPlus.ElCol),{span:1.5},{default:Vue.withCtx((()=>[Vue.unref(f)(Vue.unref(n).delete)?(Vue.openBlock(),Vue.createBlock(Vue.unref(ElementPlus.ElButton),{key:0,disabled:!Vue.unref(K),icon:Vue.unref(o),plain:"",type:"danger",onClick:V[4]||(V[4]=e=>Q())},{default:Vue.withCtx((()=>[Vue.createTextVNode(Vue.toDisplayString(Vue.unref(v)("common.delete")),1)])),_:1},8,["disabled","icon"])):Vue.createCommentVNode("",!0)])),_:1},8,["span"]),Vue.createVNode(p,{showSearch:w.value,"onUpdate:showSearch":V[5]||(V[5]=e=>w.value=e),onQueryTable:Vue.unref(S)},null,8,["showSearch","onQueryTable"])])),_:1}),Vue.createVNode(Vue.unref(ElementPlus.ElTable),{data:Vue.unref(T),onSelectionChange:R,"tooltip-effect":"light"},{default:Vue.withCtx((()=>[Vue.createVNode(Vue.unref(ElementPlus.ElTableColumn),{align:"center",type:"selection",width:"55"}),Vue.createVNode(Vue.unref(ElementPlus.ElTableColumn),{align:"center",label:"岗位编号",prop:"post_id","show-overflow-tooltip":""}),Vue.createVNode(Vue.unref(ElementPlus.ElTableColumn),{align:"center",label:"岗位编码",prop:"post_code","show-overflow-tooltip":""}),Vue.createVNode(Vue.unref(ElementPlus.ElTableColumn),{align:"center",label:"岗位名称",prop:"post_name","show-overflow-tooltip":""}),Vue.createVNode(Vue.unref(ElementPlus.ElTableColumn),{align:"center",label:"岗位排序",prop:"post_sort","show-overflow-tooltip":""}),Vue.createVNode(Vue.unref(ElementPlus.ElTableColumn),{align:"center",label:"状态",prop:"status"},{default:Vue.withCtx((e=>[Vue.createVNode(s,{options:Vue.unref(b)[Vue.unref(h).sysNormalDisable],value:e.row.status},null,8,["options","value"])])),_:1}),Vue.createVNode(Vue.unref(ElementPlus.ElTableColumn),{align:"center",label:"创建时间",prop:"created_at","show-overflow-tooltip":""},{default:Vue.withCtx((e=>[Vue.createElementVNode("span",null,Vue.toDisplayString(Vue.unref(r)(e.row.created_at)),1)])),_:1}),Vue.unref(f)(Vue.unref(n).edit,Vue.unref(n).delete)?(Vue.openBlock(),Vue.createBlock(Vue.unref(ElementPlus.ElTableColumn),{key:0,align:"center",label:"操作",width:"160px"},{default:Vue.withCtx((e=>[Vue.unref(f)(Vue.unref(n).edit)?(Vue.openBlock(),Vue.createBlock(Vue.unref(ElementPlus.ElButton),{key:0,icon:Vue.unref(l),link:"",onClick:u=>L(e.row)},{default:Vue.withCtx((()=>[Vue.createTextVNode(Vue.toDisplayString(Vue.unref(v)("common.edit")),1)])),_:2},1032,["icon","onClick"])):Vue.createCommentVNode("",!0),Vue.unref(f)(Vue.unref(n).delete)?(Vue.openBlock(),Vue.createBlock(Vue.unref(ElementPlus.ElButton),{key:1,icon:Vue.unref(o),link:"",onClick:u=>Q(e.row)},{default:Vue.withCtx((()=>[Vue.createTextVNode(Vue.toDisplayString(Vue.unref(v)("common.delete")),1)])),_:2},1032,["icon","onClick"])):Vue.createCommentVNode("",!0)])),_:1})):Vue.createCommentVNode("",!0)])),_:1},8,["data"]),Vue.withDirectives(Vue.createVNode(c,{limit:B.value.page_size,"onUpdate:limit":V[6]||(V[6]=e=>B.value.page_size=e),page:B.value.page_num,"onUpdate:page":V[7]||(V[7]=e=>B.value.page_num=e),total:Vue.unref(D),onPagination:Vue.unref(S)},null,8,["limit","page","total","onPagination"]),[[Vue.vShow,Vue.unref(D)>0]]),N.value?(Vue.openBlock(),Vue.createBlock(C,{key:0,open:N.value,"post-data":y.value,title:k.value,onCloseDialog:M},null,8,["open","post-data","title"])):Vue.createCommentVNode("",!0)]))}});export{w as default};
