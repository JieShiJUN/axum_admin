import{s as e,_ as t,u as a}from"./index.74f0e013.js";const u={class:"app-container"},l=Vue.createElementVNode("span",null,[Vue.createTextVNode(" 数据权限测试：user 为部门A2,"),Vue.createElementVNode("br"),Vue.createTextVNode(" -- 右上角头像切换角色"),Vue.createElementVNode("br"),Vue.createTextVNode(" 1：超级管理员为全部权限:显示全部数据"),Vue.createElementVNode("br"),Vue.createTextVNode(" 2：自定数据权限：显示部门A1数据"),Vue.createElementVNode("br"),Vue.createTextVNode(" 3：本部门数据权限：显示部门A2数据"),Vue.createElementVNode("br"),Vue.createTextVNode(" 4：本部门及以下数据权限：显示部门A2及以下数据(包括A21)"),Vue.createElementVNode("br"),Vue.createTextVNode(" 5：仅本人数据权限:显示本人数据"),Vue.createElementVNode("br")],-1),o=Vue.createTextVNode("搜索"),r=Vue.createTextVNode("重置"),V=Vue.createTextVNode("新增"),d=Vue.createTextVNode("删除"),n={class:"dialog-footer"},i=Vue.createTextVNode("确 定"),c=Vue.createTextVNode("取 消"),p=Vue.defineComponent({name:"DataScope"});var s=t(Object.assign(p,{setup(t){const{proxy:p}=Vue.getCurrentInstance(),s=a(),m=Vue.ref([]),f=Vue.ref(!1),_=Vue.ref(!0),h=Vue.ref(!0),v=Vue.ref([]),N=Vue.ref(!0),b=Vue.ref(!0),C=Vue.ref(0),g=Vue.ref(""),x=Vue.reactive({form:{},queryParams:{page_num:1,page_size:10,data_a:void 0,data_b:void 0,__r__:s.role},rules:{data_a:[{required:!0,message:"岗位名称不能为空",trigger:"blur"}],data_b:[{required:!0,message:"岗位编码不能为空",trigger:"blur"}]}}),{queryParams:w,form:y,rules:T}=Vue.toRefs(x);function E(){var t;_.value=!0,(t=w.value,e({url:"/test/data_scope/list",method:"get",params:t})).then((e=>{m.value=e.list,C.value=e.total,_.value=!1}))}function k(){f.value=!1,S()}function S(){y.value={id:void 0,data_a:void 0,data_b:void 0},p.resetForm("postRef")}function U(){w.value.page_num=1,E()}function A(){p.resetForm("queryRef"),U()}function K(e){v.value=e.map((e=>e.id)),N.value=1!=e.length,b.value=!e.length}function B(){S(),f.value=!0,g.value="添加岗位"}function R(){p.$refs.postRef.validate((t=>{t&&(null!=y.value.post_id?p.$modal.msgSuccess("不支持修改"):function(t){return e({url:"/test/data_scope/add",method:"post",data:t})}(y.value).then((e=>{p.$modal.msgSuccess("新增成功"),f.value=!1,E()})))}))}function D(t){const a=t.id?[t.id]:v.value;p.$modal.confirm('是否确认删除岗位编号为"'+a+'"的数据项？').then((function(){return function(t){return e({url:"/test/data_scope/delete",method:"delete",data:t})}({ids:a})})).then((()=>{E(),p.$modal.msgSuccess("删除成功")})).catch((()=>{}))}return E(),(e,t)=>{const a=Vue.resolveComponent("el-input"),p=Vue.resolveComponent("el-form-item"),s=Vue.resolveComponent("el-button"),v=Vue.resolveComponent("el-form"),N=Vue.resolveComponent("el-col"),x=Vue.resolveComponent("right-toolbar"),S=Vue.resolveComponent("el-row"),q=Vue.resolveComponent("el-table-column"),$=Vue.resolveComponent("el-table"),P=Vue.resolveComponent("pagination"),z=Vue.resolveComponent("el-dialog"),j=Vue.resolveDirective("loading");return Vue.openBlock(),Vue.createElementBlock("div",u,[l,Vue.withDirectives(Vue.createVNode(v,{model:Vue.unref(w),ref:"queryRef",inline:!0,"label-width":"68px"},{default:Vue.withCtx((()=>[Vue.createVNode(p,{label:"Id",prop:"id"},{default:Vue.withCtx((()=>[Vue.createVNode(a,{modelValue:Vue.unref(w).id,"onUpdate:modelValue":t[0]||(t[0]=e=>Vue.unref(w).id=e),placeholder:"请输入id",clearable:"",onKeyup:Vue.withKeys(U,["enter"])},null,8,["modelValue","onKeyup"])])),_:1}),Vue.createVNode(p,{label:"dataA",prop:"data_a"},{default:Vue.withCtx((()=>[Vue.createVNode(a,{modelValue:Vue.unref(w).data_a,"onUpdate:modelValue":t[1]||(t[1]=e=>Vue.unref(w).data_a=e),placeholder:"请输入A",clearable:"",onKeyup:Vue.withKeys(U,["enter"])},null,8,["modelValue","onKeyup"])])),_:1}),Vue.createVNode(p,{label:"dataB",prop:"data_b"},{default:Vue.withCtx((()=>[Vue.createVNode(a,{modelValue:Vue.unref(w).data_b,"onUpdate:modelValue":t[2]||(t[2]=e=>Vue.unref(w).data_b=e),placeholder:"请输入B",clearable:"",onKeyup:Vue.withKeys(U,["enter"])},null,8,["modelValue","onKeyup"])])),_:1}),Vue.createVNode(p,null,{default:Vue.withCtx((()=>[Vue.createVNode(s,{type:"primary",icon:"Search",onClick:U},{default:Vue.withCtx((()=>[o])),_:1}),Vue.createVNode(s,{icon:"Refresh",onClick:A},{default:Vue.withCtx((()=>[r])),_:1})])),_:1})])),_:1},8,["model"]),[[Vue.vShow,h.value]]),Vue.createVNode(S,{gutter:10,class:"mb8",style:{height:"35px"}},{default:Vue.withCtx((()=>[Vue.createVNode(N,{span:1.5},{default:Vue.withCtx((()=>[Vue.createVNode(s,{type:"primary",plain:"",icon:"Plus",onClick:B},{default:Vue.withCtx((()=>[V])),_:1})])),_:1},8,["span"]),Vue.createCommentVNode(' <el-col :span="1.5">\r\n        <el-button\r\n          type="success"\r\n          plain\r\n          icon="Edit"\r\n          :disabled="single"\r\n          @click="handleUpdate"\r\n          >修改</el-button\r\n        >\r\n      </el-col> '),Vue.createVNode(N,{span:1.5},{default:Vue.withCtx((()=>[Vue.createVNode(s,{type:"danger",plain:"",icon:"Delete",disabled:b.value,onClick:D},{default:Vue.withCtx((()=>[d])),_:1},8,["disabled"])])),_:1},8,["span"]),Vue.createVNode(x,{showSearch:h.value,"onUpdate:showSearch":t[3]||(t[3]=e=>h.value=e),onQueryTable:E},null,8,["showSearch"])])),_:1}),Vue.withDirectives((Vue.openBlock(),Vue.createBlock($,{data:m.value,onSelectionChange:K},{default:Vue.withCtx((()=>[Vue.createVNode(q,{type:"selection",width:"55",align:"center"}),Vue.createVNode(q,{label:"id",align:"center",prop:"id"}),Vue.createVNode(q,{label:"数据A",align:"center",prop:"data_a"}),Vue.createVNode(q,{label:"数据B",align:"center",prop:"data_b"}),Vue.createVNode(q,{label:"创建人",align:"center",prop:"created_by"})])),_:1},8,["data"])),[[j,_.value]]),Vue.withDirectives(Vue.createVNode(P,{total:C.value,page:Vue.unref(w).page_num,"onUpdate:page":t[4]||(t[4]=e=>Vue.unref(w).page_num=e),limit:Vue.unref(w).page_size,"onUpdate:limit":t[5]||(t[5]=e=>Vue.unref(w).page_size=e),onPagination:E},null,8,["total","page","limit"]),[[Vue.vShow,C.value>0]]),Vue.createCommentVNode(" 添加或修改岗位对话框 "),Vue.createVNode(z,{title:g.value,modelValue:f.value,"onUpdate:modelValue":t[8]||(t[8]=e=>f.value=e),width:"500px","append-to-body":""},{footer:Vue.withCtx((()=>[Vue.createElementVNode("div",n,[Vue.createVNode(s,{type:"primary",onClick:R},{default:Vue.withCtx((()=>[i])),_:1}),Vue.createVNode(s,{onClick:k},{default:Vue.withCtx((()=>[c])),_:1})])])),default:Vue.withCtx((()=>[Vue.createVNode(v,{ref:"postRef",model:Vue.unref(y),rules:Vue.unref(T),"label-width":"80px"},{default:Vue.withCtx((()=>[Vue.createVNode(p,{label:"data_a",prop:"data_a"},{default:Vue.withCtx((()=>[Vue.createVNode(a,{modelValue:Vue.unref(y).data_a,"onUpdate:modelValue":t[6]||(t[6]=e=>Vue.unref(y).data_a=e),placeholder:"A"},null,8,["modelValue"])])),_:1}),Vue.createVNode(p,{label:"data_b",prop:"data_b"},{default:Vue.withCtx((()=>[Vue.createVNode(a,{modelValue:Vue.unref(y).data_b,"onUpdate:modelValue":t[7]||(t[7]=e=>Vue.unref(y).data_b=e),placeholder:"B"},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["title","modelValue"])])}}}),[["__file","E:/LingDu/rust/poem/RuoYi-Vue3/src/views/test/data_scope/index.vue"]]);export{s as default};
