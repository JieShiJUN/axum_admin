import{i as e,m as l,A as u,E as t,n as a}from"./index.js";import{u as r}from"./useFormUtil-98c17c20.js";import{d as o}from"./dict-2940434e.js";const V={class:"dialog-footer"},n=Vue.defineComponent({__name:"dept-manage-dialog",props:{deptTree:{type:Array,required:!0},deptData:{type:Object,required:!0},open:{type:Boolean,default:!1},title:{type:String,default:""}},emits:["closeDialog"],setup(n,{emit:d}){const m=n,{t:s}=VueI18n.useI18n({useScope:"global"}),i=Vue.ref({...m.deptData}),p=Vue.ref(),{formValidate:c}=r(),f={value:"dept_id",label:"dept_name",checkStrictly:!0},E=e(o.sysNormalDisable,o.isAdmin,o.sysUserSex),_=Vue.ref({parent_id:[{required:!0,message:"上级不能为空",trigger:"blur"}],order_num:[{required:!0,message:"显示顺序不能为空",trigger:"blur"}],dept_name:[{required:!0,message:"部门名称不能为空",trigger:"blur"}]}),h=()=>{d("closeDialog")};return(e,r)=>(Vue.openBlock(),Vue.createBlock(Vue.unref(ElementPlus.ElDialog),{modelValue:n.open,"onUpdate:modelValue":r[8]||(r[8]=e=>Vue.isRef(open)?open.value=e:null),"before-close":h,title:n.title,"append-to-body":"",width:"600px"},{footer:Vue.withCtx((()=>[Vue.createElementVNode("div",V,[Vue.createVNode(Vue.unref(ElementPlus.ElButton),{type:"primary",onClick:r[7]||(r[7]=e=>(async e=>{if(await c(e)){if(i.value.dept_id){const{data:e,execute:a}=l(u.edit,i);if(await a(),e.value===t)return;ElementPlus.ElMessage.success(`更新 ${i.value.dept_name} 成功`)}else{const{data:e,execute:l}=a(u.add,i);if(await l(),e.value===t)return;ElementPlus.ElMessage.success(`新增 ${i.value.dept_name} 成功`)}h()}})(p.value))},{default:Vue.withCtx((()=>[Vue.createTextVNode(Vue.toDisplayString(Vue.unref(s)("common.submit")),1)])),_:1}),Vue.createVNode(Vue.unref(ElementPlus.ElButton),{onClick:h},{default:Vue.withCtx((()=>[Vue.createTextVNode(Vue.toDisplayString(Vue.unref(s)("common.cancel")),1)])),_:1})])])),default:Vue.withCtx((()=>[Vue.createVNode(Vue.unref(ElementPlus.ElForm),{ref_key:"userRef",ref:p,model:i.value,rules:_.value,class:"base-form","label-width":"100px"},{default:Vue.withCtx((()=>[Vue.createVNode(Vue.unref(ElementPlus.ElRow),{gutter:20},{default:Vue.withCtx((()=>[Vue.createVNode(Vue.unref(ElementPlus.ElCol),{span:12},{default:Vue.withCtx((()=>[Vue.createVNode(Vue.unref(ElementPlus.ElFormItem),{label:"上级部门",prop:"parent_id"},{default:Vue.withCtx((()=>[Vue.createVNode(Vue.unref(ElementPlus.ElTreeSelect),{modelValue:i.value.parent_id,"onUpdate:modelValue":r[0]||(r[0]=e=>i.value.parent_id=e),data:n.deptTree,props:f,"render-after-expand":!1,"check-strictly":"","collapse-tags":"",filterable:"",placeholder:"请选择部门"},null,8,["modelValue","data"])])),_:1})])),_:1})])),_:1}),Vue.createVNode(Vue.unref(ElementPlus.ElRow),{gutter:20},{default:Vue.withCtx((()=>[Vue.createVNode(Vue.unref(ElementPlus.ElCol),{span:12},{default:Vue.withCtx((()=>[Vue.createVNode(Vue.unref(ElementPlus.ElFormItem),{label:"部门名称",prop:"dept_name"},{default:Vue.withCtx((()=>[Vue.createVNode(Vue.unref(ElementPlus.ElInput),{modelValue:i.value.dept_name,"onUpdate:modelValue":r[1]||(r[1]=e=>i.value.dept_name=e),placeholder:"请输入部门名称"},null,8,["modelValue"])])),_:1})])),_:1}),Vue.createVNode(Vue.unref(ElementPlus.ElCol),{span:12},{default:Vue.withCtx((()=>[Vue.createVNode(Vue.unref(ElementPlus.ElFormItem),{label:"显示排序",prop:"order_num"},{default:Vue.withCtx((()=>[Vue.createVNode(Vue.unref(ElementPlus.ElInputNumber),{modelValue:i.value.order_num,"onUpdate:modelValue":r[2]||(r[2]=e=>i.value.order_num=e),min:0,"controls-position":"right"},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),Vue.createVNode(Vue.unref(ElementPlus.ElRow),{gutter:20},{default:Vue.withCtx((()=>[Vue.createVNode(Vue.unref(ElementPlus.ElCol),{span:12},{default:Vue.withCtx((()=>[Vue.createVNode(Vue.unref(ElementPlus.ElFormItem),{label:"负责人",prop:"leader"},{default:Vue.withCtx((()=>[Vue.createVNode(Vue.unref(ElementPlus.ElInput),{modelValue:i.value.leader,"onUpdate:modelValue":r[3]||(r[3]=e=>i.value.leader=e),maxlength:"20",placeholder:"请输入负责人"},null,8,["modelValue"])])),_:1})])),_:1}),Vue.createVNode(Vue.unref(ElementPlus.ElCol),{span:12},{default:Vue.withCtx((()=>[Vue.createVNode(Vue.unref(ElementPlus.ElFormItem),{label:"联系电话",prop:"phone"},{default:Vue.withCtx((()=>[Vue.createVNode(Vue.unref(ElementPlus.ElInput),{modelValue:i.value.phone,"onUpdate:modelValue":r[4]||(r[4]=e=>i.value.phone=e),maxlength:"11",placeholder:"请输入联系电话"},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),Vue.createVNode(Vue.unref(ElementPlus.ElRow),{gutter:20},{default:Vue.withCtx((()=>[Vue.createVNode(Vue.unref(ElementPlus.ElCol),{span:12},{default:Vue.withCtx((()=>[Vue.createVNode(Vue.unref(ElementPlus.ElFormItem),{label:"邮箱",prop:"email"},{default:Vue.withCtx((()=>[Vue.createVNode(Vue.unref(ElementPlus.ElInput),{modelValue:i.value.email,"onUpdate:modelValue":r[5]||(r[5]=e=>i.value.email=e),maxlength:"50",placeholder:"请输入邮箱"},null,8,["modelValue"])])),_:1})])),_:1}),Vue.createVNode(Vue.unref(ElementPlus.ElCol),{span:12},{default:Vue.withCtx((()=>[Vue.createVNode(Vue.unref(ElementPlus.ElFormItem),{label:"部门状态"},{default:Vue.withCtx((()=>[Vue.createVNode(Vue.unref(ElementPlus.ElRadioGroup),{modelValue:i.value.status,"onUpdate:modelValue":r[6]||(r[6]=e=>i.value.status=e)},{default:Vue.withCtx((()=>[(Vue.openBlock(!0),Vue.createElementBlock(Vue.Fragment,null,Vue.renderList(Vue.unref(E)[Vue.unref(o).sysNormalDisable],(e=>(Vue.openBlock(),Vue.createBlock(Vue.unref(ElementPlus.ElRadio),{key:e.value,label:e.value},{default:Vue.withCtx((()=>[Vue.createTextVNode(Vue.toDisplayString(e.label),1)])),_:2},1032,["label"])))),128))])),_:1},8,["modelValue"])])),_:1})])),_:1})])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["modelValue","title"]))}});export{n as _};
